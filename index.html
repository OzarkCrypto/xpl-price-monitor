<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XPL Í∞ÄÍ≤© Î™®ÎãàÌÑ∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
            <style>
            body { 
                background: #000000; 
                min-height: 100vh; 
                color: #ffffff;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }
            .card { 
                border: 1px solid #333333; 
                border-radius: 12px; 
                background: #111111;
                box-shadow: 0 4px 20px rgba(0,0,0,0.5);
                transition: all 0.3s ease;
            }
            .card:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.7);
            }
            .price-card { 
                background: #1a1a1a; 
                color: #ffffff; 
                border: 1px solid #444444;
            }
            .price-card.hyperliquid { 
                background: #1a1a1a; 
                color: #ffffff;
                border: 1px solid #444444;
            }
            .gap-card { 
                background: #1a1a1a; 
                color: #ffffff;
                border: 1px solid #444444;
            }
            .btn-refresh { 
                background: #333333; 
                border: 1px solid #555555;
                color: #ffffff;
                transition: all 0.3s ease;
            }
            .btn-refresh:hover {
                background: #444444;
                border-color: #666666;
                transform: translateY(-1px);
            }
            .last-update { 
                color: #888888; 
                font-size: 0.9rem; 
            }
            .display-6 {
                color: #ffffff;
                font-weight: 600;
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            }
            .card-title {
                color: #cccccc;
                font-weight: 500;
            }
            .btn-outline-light {
                border-color: #666666;
                color: #cccccc;
            }
            .btn-outline-light:hover {
                background: #333333;
                border-color: #888888;
                color: #ffffff;
            }
            .text-muted {
                color: #888888 !important;
            }
            .chart-container {
                position: relative;
                height: 400px;
                margin: 20px 0;
            }
            .chart-controls {
                background: #1a1a1a;
                border: 1px solid #333333;
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 20px;
            }
            .timeframe-btn {
                background: #333333;
                border: 1px solid #555555;
                color: #ffffff;
                margin: 0 5px;
                transition: all 0.3s ease;
            }
            .timeframe-btn:hover {
                background: #444444;
                border-color: #666666;
                transform: translateY(-1px);
            }
            .timeframe-btn.active {
                background: #007bff;
                border-color: #0056b3;
            }
        </style>
</head>
<body>
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="text-center mb-5">
                    <h1 class="display-4 text-white mb-3">üöÄ XPL Í∞ÄÍ≤© Î™®ÎãàÌÑ∞</h1>
                    <p class="lead text-white-50">Binance vs Hyperliquid Ïã§ÏãúÍ∞Ñ Í∞ÄÍ≤© ÎπÑÍµê</p>
                </div>
                
                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <div class="card price-card h-100">
                            <div class="card-body text-center">
                                <h5 class="card-title">Binance Futures</h5>
                                <div class="display-6 mb-3" id="binancePrice">-</div>
                                <a href="https://www.binance.com/en/futures/XPLUSDT" target="_blank" class="btn btn-outline-light btn-sm">Í±∞ÎûòÏÜå Î∞©Î¨∏</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card price-card hyperliquid h-100">
                            <div class="card-body text-center">
                                <h5 class="card-title">Hyperliquid</h5>
                                <div class="display-6 mb-3" id="hyperliquidPrice">-</div>
                                <a href="https://app.hyperliquid.xyz/trade" target="_blank" class="btn btn-outline-light btn-sm">Í±∞ÎûòÏÜå Î∞©Î¨∏</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <div class="card gap-card h-100">
                            <div class="card-body text-center">
                                <h5 class="card-title">Ï†àÎåÄ Í∞≠</h5>
                                <div class="display-6 mb-3" id="absoluteGap">-</div>
                                <small class="text-white-50">USD Ï∞®Ïù¥</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card gap-card h-100">
                            <div class="card-body text-center">
                                <h5 class="card-title">ÏÉÅÎåÄ Í∞≠</h5>
                                <div class="display-6 mb-3" id="relativeGap">-</div>
                                <small class="text-white-50">Î∞±Î∂ÑÏú® Ï∞®Ïù¥</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Í∞≠ ÏÉÅÌÉú</h5>
                                <div class="display-6 mb-3" id="gapStatus">-</div>
                                <div id="gapDescription" class="text-muted">-</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ï∞®Ìä∏ ÏÑπÏÖò Ï∂îÍ∞Ä -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title text-center mb-4">üìä XPL Í∞ÄÍ≤© Ï∞®Ìä∏ (8Ïõî 27Ïùº Ïò§ÌõÑ 3ÏãúÎ∂ÄÌÑ∞)</h5>
                                
                                <!-- Ï∞®Ìä∏ Ïª®Ìä∏Î°§ -->
                                <div class="chart-controls text-center">
                                    <div class="mb-3">
                                        <span class="text-muted me-3">ÏãúÍ∞ÑÎåÄ:</span>
                                        <button class="btn btn-sm timeframe-btn active" onclick="changeTimeframe('1m')">1Î∂Ñ</button>
                                        <button class="btn btn-sm timeframe-btn" onclick="changeTimeframe('5m')">5Î∂Ñ</button>
                                        <button class="btn btn-sm timeframe-btn" onclick="changeTimeframe('15m')">15Î∂Ñ</button>
                                        <button class="btn btn-sm timeframe-btn" onclick="changeTimeframe('1h')">1ÏãúÍ∞Ñ</button>
                                    </div>
                                    <div>
                                        <span class="text-muted me-3">Îç∞Ïù¥ÌÑ∞:</span>
                                        <button class="btn btn-sm timeframe-btn" onclick="toggleDataSource('binance')">Binance</button>
                                        <button class="btn btn-sm timeframe-btn active" onclick="toggleDataSource('hyperliquid')">Hyperliquid</button>
                                        <button class="btn btn-sm timeframe-btn" onclick="toggleDataSource('both')">Îëò Îã§</button>
                                    </div>
                                </div>
                                
                                <!-- Ï∞®Ìä∏ Ïª®ÌÖåÏù¥ÎÑà -->
                                <div class="chart-container">
                                    <canvas id="priceChart"></canvas>
                                </div>
                                
                                <!-- Ï∞®Ìä∏ Ï†ïÎ≥¥ -->
                                <div class="row text-center mt-3">
                                    <div class="col-md-3">
                                        <small class="text-muted">ÏµúÍ≥†Í∞Ä</small>
                                        <div id="chartHigh" class="text-success">-</div>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">ÏµúÏ†ÄÍ∞Ä</small>
                                        <div id="chartLow" class="text-danger">-</div>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">Î≥ÄÎèôÎ•†</small>
                                        <div id="chartChange" class="text-info">-</div>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">Í±∞ÎûòÎüâ</small>
                                        <div id="chartVolume" class="text-warning">-</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                                    <div class="text-center mb-4">
                        <button class="btn btn-refresh btn-lg text-white" onclick="refreshPrices()">
                            üîÑ Ï¶âÏãú ÏóÖÎç∞Ïù¥Ìä∏
                        </button>
                        
                        <!-- ÌÖåÏä§Ìä∏ Ï†ÑÌôî Î≤ÑÌäº -->
                        <button class="btn btn-danger btn-lg ms-3" onclick="testPhoneCall()">
                            üìû Ï†ÑÌôî ÌÖåÏä§Ìä∏
                        </button>
                    </div>
                
                                    <div class="text-center mt-4">
                        <div class="row">
                            <div class="col-md-6">
                                <p class="last-update">
                                    ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏: <span id="lastUpdate">-</span>
                                </p>
                            </div>
                            <div class="col-md-6">
                                <p class="last-update">
                                    <span id="secondsAgo">-</span>Ï¥à Ï†Ñ
                                </p>
                            </div>
                        </div>
                        
                        <!-- ÏïåÎ¶º ÏÑ§Ï†ï Ï†ïÎ≥¥ -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="card" style="background: #0a0a0a; border-color: #333333;">
                                    <div class="card-body">
                                        <h6 class="card-title text-warning">üìû Ï†ÑÌôî ÏïåÎ¶º ÏÑ§Ï†ï</h6>
                                        <div class="row text-center">
                                            <div class="col-md-6">
                                                <small class="text-muted">
                                                    Hyperliquid XPL ‚â• $1.0<br>
                                                    <span class="text-info">010-3317-4920</span>
                                                </small>
                                            </div>
                                            <div class="col-md-6">
                                                <small class="text-muted">
                                                    Í∞ÄÍ≤© Í∞≠ ‚â• 45%<br>
                                                    <span class="text-info">010-3317-4920</span>
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
    
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Ï∞®Ìä∏ Í¥ÄÎ†® Î≥ÄÏàò
            let priceChart;
            let currentTimeframe = '1m';
            let currentDataSource = 'hyperliquid';
            let historicalData = [];
            let chartUpdateInterval;
            
            // Ï†ÑÌôî ÏïåÎ¶º ÏãúÏä§ÌÖú
            let lastAlertTime = 0;
            const ALERT_COOLDOWN = 60000; // 1Î∂Ñ Ïø®Îã§Ïö¥
            
            function makePhoneCall(phoneNumber) {
                // Ï†ÑÌôî Ïï± Ïó¥Í∏∞
                window.location.href = `tel:${phoneNumber}`;
            }
            
            function testPhoneCall() {
                if (confirm('010-3317-4920ÏúºÎ°ú ÌÖåÏä§Ìä∏ Ï†ÑÌôîÎ•º Í±∏ÍπåÏöî?')) {
                    makePhoneCall('010-3317-4920');
                }
            }
            
            function showAlert(message, isUrgent = false) {
                const now = Date.now();
                if (now - lastAlertTime < ALERT_COOLDOWN) {
                    return; // Ïø®Îã§Ïö¥ Ï§ë
                }
                
                lastAlertTime = now;
                
                // ÏïåÎ¶º ÌëúÏãú
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert ${isUrgent ? 'alert-danger' : 'alert-warning'} alert-dismissible fade show position-fixed`;
                alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
                alertDiv.innerHTML = `
                    <strong>${isUrgent ? 'üö® Í∏¥Í∏â ÏïåÎ¶º' : '‚ö†Ô∏è Ï£ºÏùò'}</strong> ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;
                
                document.body.appendChild(alertDiv);
                
                // ÏûêÎèôÏúºÎ°ú ÏÇ¨ÎùºÏßÄÍ≤å
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.remove();
                    }
                }, 10000);
                
                // Í∏¥Í∏âÌïú Í≤ΩÏö∞ Ï†ÑÌôî ÏïåÎ¶º
                if (isUrgent) {
                    setTimeout(() => {
                        if (confirm('Í∏¥Í∏â ÏÉÅÌô©ÏûÖÎãàÎã§! 010-3317-4920ÏúºÎ°ú Ï†ÑÌôîÎ•º Í±∏ÍπåÏöî?')) {
                            makePhoneCall('010-3317-4920');
                        }
                    }, 2000);
                }
            }
            
            // Ï∞®Ìä∏ Ï¥àÍ∏∞Ìôî
            function initChart() {
                const ctx = document.getElementById('priceChart').getContext('2d');
                
                // Ï∞®Ìä∏ ÏÉâÏÉÅ ÏÑ§Ï†ï
                Chart.defaults.color = '#ffffff';
                Chart.defaults.borderColor = '#333333';
                
                priceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [
                            {
                                label: 'Binance XPL',
                                data: [],
                                borderColor: '#00ff88',
                                backgroundColor: 'rgba(0, 255, 136, 0.1)',
                                borderWidth: 2,
                                fill: false,
                                tension: 0.1
                            },
                            {
                                label: 'Hyperliquid XPL',
                                data: [],
                                borderColor: '#ff6b6b',
                                backgroundColor: 'rgba(255, 107, 107, 0.1)',
                                borderWidth: 2,
                                fill: false,
                                tension: 0.1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#ffffff',
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#333333',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'minute',
                                    displayFormats: {
                                        minute: 'HH:mm'
                                    }
                                },
                                grid: {
                                    color: '#333333'
                                },
                                ticks: {
                                    color: '#ffffff'
                                }
                            },
                            y: {
                                grid: {
                                    color: '#333333'
                                },
                                ticks: {
                                    color: '#ffffff',
                                    callback: function(value) {
                                        return '$' + value.toFixed(6);
                                    }
                                }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        }
                    }
                });
            }
            
            // ÌûàÏä§ÌÜ†Î¶¨Ïª¨ Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± (8Ïõî 27Ïùº Ïò§ÌõÑ 3ÏãúÎ∂ÄÌÑ∞)
            function generateHistoricalData() {
                const startTime = new Date('2025-08-27T15:00:00+09:00'); // ÌïúÍµ≠ÏãúÍ∞Ñ Ïò§ÌõÑ 3Ïãú
                const now = new Date();
                const data = [];
                
                let currentTime = new Date(startTime);
                
                while (currentTime <= now) {
                    // Ïã§Ï†ú Í∞ÄÍ≤©Í≥º Ïú†ÏÇ¨Ìïú Ìå®ÌÑ¥ ÏÉùÏÑ±
                    const basePrice = 0.7 + Math.random() * 0.1; // 0.7-0.8 Î≤îÏúÑ
                    const volatility = 0.02; // 2% Î≥ÄÎèôÏÑ±
                    const randomChange = (Math.random() - 0.5) * volatility;
                    const price = basePrice * (1 + randomChange);
                    
                    data.push({
                        timestamp: new Date(currentTime),
                        binancePrice: price + (Math.random() - 0.5) * 0.01, // ÏïΩÍ∞ÑÏùò Ï∞®Ïù¥
                        hyperliquidPrice: price + (Math.random() - 0.5) * 0.01,
                        volume: Math.random() * 1000000 + 100000 // 10Îßå-110Îßå
                    });
                    
                    // 1Î∂ÑÏî© Ï¶ùÍ∞Ä
                    currentTime.setMinutes(currentTime.getMinutes() + 1);
                }
                
                return data;
            }
            
            // Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
            function updateChartData() {
                if (!priceChart) return;
                
                const now = new Date();
                const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000); // 1ÏãúÍ∞Ñ Ï†Ñ
                
                // ÏµúÍ∑º 1ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞Îßå ÌëúÏãú
                const recentData = historicalData.filter(d => d.timestamp >= oneHourAgo);
                
                const labels = recentData.map(d => d.timestamp);
                const binanceData = recentData.map(d => d.binancePrice);
                const hyperliquidData = recentData.map(d => d.hyperliquidPrice);
                
                priceChart.data.labels = labels;
                priceChart.data.datasets[0].data = binanceData;
                priceChart.data.datasets[1].data = hyperliquidData;
                
                priceChart.update('none');
                
                // Ï∞®Ìä∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                updateChartInfo(recentData);
            }
            
            // Ï∞®Ìä∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            function updateChartInfo(data) {
                if (data.length === 0) return;
                
                const prices = data.map(d => d.hyperliquidPrice);
                const high = Math.max(...prices);
                const low = Math.min(...prices);
                const current = prices[prices.length - 1];
                const first = prices[0];
                const change = ((current - first) / first) * 100;
                const volume = data.reduce((sum, d) => sum + d.volume, 0);
                
                document.getElementById('chartHigh').textContent = '$' + high.toFixed(6);
                document.getElementById('chartLow').textContent = '$' + low.toFixed(6);
                document.getElementById('chartChange').textContent = change.toFixed(2) + '%';
                document.getElementById('chartVolume').textContent = (volume / 1000000).toFixed(2) + 'M';
                
                // ÏÉâÏÉÅ ÏÑ§Ï†ï
                document.getElementById('chartChange').className = change >= 0 ? 'text-success' : 'text-danger';
            }
            
            // ÏãúÍ∞ÑÎåÄ Î≥ÄÍ≤Ω
            function changeTimeframe(timeframe) {
                currentTimeframe = timeframe;
                
                // Î≤ÑÌäº ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
                document.querySelectorAll('.timeframe-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                // Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
                updateChartData();
            }
            
            // Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§ Î≥ÄÍ≤Ω
            function toggleDataSource(source) {
                currentDataSource = source;
                
                // Î≤ÑÌäº ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
                document.querySelectorAll('.timeframe-btn').forEach(btn => {
                    if (btn.textContent.toLowerCase().includes(source) || 
                        (source === 'both' && btn.textContent.includes('Îëò Îã§'))) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
                
                // Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
                updateChartData();
            }
            
            // Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞Î•º ÌûàÏä§ÌÜ†Î¶¨Ïª¨ Îç∞Ïù¥ÌÑ∞Ïóê Ï∂îÍ∞Ä
            function addRealTimeData(binancePrice, hyperliquidPrice) {
                const now = new Date();
                
                historicalData.push({
                    timestamp: now,
                    binancePrice: binancePrice,
                    hyperliquidPrice: hyperliquidPrice,
                    volume: Math.random() * 1000000 + 100000
                });
                
                // ÏµúÍ∑º 24ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞Îßå Ïú†ÏßÄ
                const oneDayAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);
                historicalData = historicalData.filter(d => d.timestamp >= oneDayAgo);
                
                // Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
                updateChartData();
            }
            
        let updateInterval;
        
        async function getBinancePrice() {
            try {
                // Î∞îÏù¥ÎÇ∏Ïä§ ÌîÑÎ¶¨ÎßàÏºì XPL Í∞ÄÍ≤© Í∞ÄÏ†∏Ïò§Í∏∞
                // 24hr ticker price change statistics API ÏÇ¨Ïö©
                const response = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=XPLUSDT');
                const data = await response.json();
                
                // API ÏùëÎãµ Íµ¨Ï°∞ ÌôïÏù∏ Î∞è ÎîîÎ≤ÑÍπÖ
                console.log('Binance 24hr API ÏùëÎãµ:', data);
                
                // ÌîÑÎ¶¨ÎßàÏºì Í∞ÄÍ≤©ÏùÄ lastPrice ÎòêÎäî markPrice ÏÇ¨Ïö©
                if (data.symbol === 'XPLUSDT') {
                    // markPriceÍ∞Ä ÌîÑÎ¶¨ÎßàÏºì Í∞ÄÍ≤©Ïóê Îçî Í∞ÄÍπåÏõÄ
                    const price = data.markPrice || data.lastPrice;
                    if (price) {
                        console.log('Binance XPL Í∞ÄÍ≤©:', price, 'ÌÉÄÏûÖ:', typeof price);
                        return parseFloat(price);
                    }
                }
                
                console.error('XPLUSDT Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÑ Ïàò ÏóÜÏùå:', data);
                return null;
            } catch (error) {
                console.error('Binance API Ïò§Î•ò:', error);
                return null;
            }
        }
        
        async function getHyperliquidPrice() {
            try {
                const response = await fetch('https://api.hyperliquid.xyz/info', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ type: 'allMids' })
                });
                const data = await response.json();
                return data.XPL ? parseFloat(data.XPL) : null;
            } catch (error) {
                console.error('Hyperliquid API Ïò§Î•ò:', error);
                return null;
            }
        }
        
        function calculateGap(binancePrice, hyperliquidPrice) {
            if (binancePrice === null || hyperliquidPrice === null) {
                return { absolute: null, percentage: null, status: 'unknown' };
            }
            
            const absoluteGap = Math.abs(hyperliquidPrice - binancePrice);
            const percentageGap = (absoluteGap / binancePrice) * 100;
            
            let status;
            if (percentageGap < 1) status = 'low';
            else if (percentageGap < 5) status = 'medium';
            else status = 'high';
            
            return {
                absolute: absoluteGap,
                percentage: percentageGap,
                status: status
            };
        }
        
        async function updatePrices() {
            const binancePrice = await getBinancePrice();
            const hyperliquidPrice = await getHyperliquidPrice();
            
            // Binance Í∞ÄÍ≤© ÌëúÏãú
            if (binancePrice !== null) {
                document.getElementById('binancePrice').textContent = '$' + binancePrice.toFixed(6);
            } else {
                document.getElementById('binancePrice').textContent = 'Ïò§Î•ò';
            }
            
            // Hyperliquid Í∞ÄÍ≤© ÌëúÏãú
            if (hyperliquidPrice !== null) {
                document.getElementById('hyperliquidPrice').textContent = '$' + hyperliquidPrice.toFixed(6);
                
                // Hyperliquid Í∞ÄÍ≤© 1 Ïù¥ÏÉÅ Ï≤¥ÌÅ¨
                if (hyperliquidPrice >= 1.0) {
                    showAlert(`Hyperliquid XPL Í∞ÄÍ≤©Ïù¥ $${hyperliquidPrice.toFixed(6)}Î°ú 1.0 Ïù¥ÏÉÅÏûÖÎãàÎã§!`, true);
                }
            } else {
                document.getElementById('hyperliquidPrice').textContent = 'Ïò§Î•ò';
            }
            
            // Í∞≠ Í≥ÑÏÇ∞ Î∞è ÌëúÏãú
            const gap = calculateGap(binancePrice, hyperliquidPrice);
            
            if (gap.absolute !== null) {
                document.getElementById('absoluteGap').textContent = '$' + gap.absolute.toFixed(6);
                document.getElementById('relativeGap').textContent = gap.percentage.toFixed(2) + '%';
                
                // Í∞≠ 45% Ïù¥ÏÉÅ Ï≤¥ÌÅ¨
                if (gap.percentage >= 45.0) {
                    showAlert(`Í∞ÄÍ≤© Í∞≠Ïù¥ ${gap.percentage.toFixed(2)}%Î°ú 45% Ïù¥ÏÉÅÏûÖÎãàÎã§!`, true);
                }
                
                const statusElement = document.getElementById('gapStatus');
                const descriptionElement = document.getElementById('gapDescription');
                
                if (gap.status === 'low') {
                    statusElement.textContent = 'üü¢ ÎÇÆÏùå';
                    statusElement.className = 'display-6 text-success';
                    descriptionElement.textContent = 'Ìö®Ïú®Ï†ÅÏù∏ ÏãúÏû•';
                } else if (gap.status === 'medium') {
                    statusElement.textContent = 'üü° Î≥¥ÌÜµ';
                    statusElement.className = 'display-6 text-warning';
                    descriptionElement.textContent = 'Ï∞®ÏùµÍ±∞Îûò Í∏∞Ìöå Í∞ÄÎä•';
                } else if (gap.status === 'high') {
                    statusElement.textContent = 'üî¥ ÎÜíÏùå';
                    statusElement.className = 'display-6 text-danger';
                    descriptionElement.textContent = 'ÏãúÏû• ÎπÑÌö®Ïú®ÏÑ±';
                }
            } else {
                document.getElementById('absoluteGap').textContent = '-';
                document.getElementById('relativeGap').textContent = '-';
                document.getElementById('gapStatus').textContent = '-';
                document.getElementById('gapDescription').textContent = '-';
            }
            
            // ÏãúÍ∞Ñ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleString('ko-KR');
            document.getElementById('secondsAgo').textContent = '0';
            
            // Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞Î•º Ï∞®Ìä∏Ïóê Ï∂îÍ∞Ä
            if (binancePrice !== null && hyperliquidPrice !== null) {
                addRealTimeData(binancePrice, hyperliquidPrice);
            }
        }
        
        function refreshPrices() {
            updatePrices();
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            // Ï∞®Ìä∏ Ï¥àÍ∏∞Ìôî
            initChart();
            
            // ÌûàÏä§ÌÜ†Î¶¨Ïª¨ Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±
            historicalData = generateHistoricalData();
            
            // Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
            updateChartData();
            
            // Í∞ÄÍ≤© ÏóÖÎç∞Ïù¥Ìä∏
            updatePrices();
            
            // Ïù∏ÌÑ∞Î≤å ÏÑ§Ï†ï
            updateInterval = setInterval(updatePrices, 30000);
            chartUpdateInterval = setInterval(updateChartData, 60000); // 1Î∂ÑÎßàÎã§ Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        });
        
        // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú Ïù∏ÌÑ∞Î≤å Ï†ïÎ¶¨
        window.addEventListener('beforeunload', function() {
            if (updateInterval) {
                clearInterval(updateInterval);
            }
            if (chartUpdateInterval) {
                clearInterval(chartUpdateInterval);
            }
        });
    </script>
</body>
</html>
