<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gap Monitor - XPL, WLFI & LINEA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #000000;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar-brand {
            color: #ffffff !important;
            font-weight: bold;
            font-size: 1.5rem;
        }
        .card {
            background: #0a0a0a;
            border: 1px solid #333333;
            margin-bottom: 20px;
        }
        .card-header {
            background: #1a1a1a;
            border-bottom: 1px solid #333333;
            color: #ffffff;
        }
        .price-display {
            font-size: 2rem;
            font-weight: bold;
            color: #ffffff;
            text-align: center;
            margin: 20px 0;
        }
        .gap-display {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
        }
        .btn {
            margin: 5px;
        }
        .nav-tabs .nav-link {
            color: #ffffff;
            background: #1a1a1a;
            border: 1px solid #333333;
        }
        .nav-tabs .nav-link.active {
            background: #0a0a0a;
            color: #ffffff;
            border-bottom: 1px solid #0a0a0a;
        }
        .status-indicator {
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }
        .status-normal {
            background: #28a745;
            color: #ffffff;
        }
        .status-warning {
            background: #ffc107;
            color: #000000;
        }
        .status-danger {
            background: #dc3545;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <span class="navbar-brand">ğŸš€ Gap Monitor</span>
            <span class="navbar-text">XPL, WLFI & LINEA ì‹¤ì‹œê°„ ê°€ê²© ë¹„êµ</span>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <ul class="nav nav-tabs" id="tokenTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="xpl-tab" data-bs-toggle="tab" data-bs-target="#xpl-content" type="button" role="tab">
                    ğŸª™ XPL
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="wlfi-tab" data-bs-toggle="tab" data-bs-target="#wlfi-content" type="button" role="tab">
                    ğŸª™ WLFI
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="linea-tab" data-bs-toggle="tab" data-bs-target="#linea-content" type="button" role="tab">
                    ğŸª™ LINEA
                </button>
            </li>
        </ul>

        <!-- íƒ­ ì½˜í…ì¸  -->
        <div class="tab-content" id="tokenTabContent">
            <!-- XPL íƒ­ -->
            <div class="tab-pane fade show active" id="xpl-content" role="tabpanel">
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š Binance Futures</h5>
                            </div>
                            <div class="card-body">
                                <div class="price-display" id="binancePrice">-</div>
                                <div class="text-center">
                                    <a href="https://www.binance.com/en/futures/XPLUSDT" target="_blank" class="btn btn-outline-light btn-sm">
                                        ê±°ë˜ì†Œ ë°©ë¬¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š Hyperliquid</h5>
                            </div>
                            <div class="card-body">
                                <div class="price-display" id="hyperliquidPrice">-</div>
                                <div class="text-center">
                                    <a href="https://app.hyperliquid.xyz/trade/XPL" target="_blank" class="btn btn-outline-light btn-sm">
                                        ê±°ë˜ì†Œ ë°©ë¬¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ’° ì ˆëŒ€ ê°­</h5>
                            </div>
                            <div class="card-body">
                                <div class="gap-display" id="absoluteGap">-</div>
                                <small class="text-muted">USD ì°¨ì´</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“ˆ ìƒëŒ€ ê°­</h5>
                            </div>
                            <div class="card-body">
                                <div class="gap-display" id="relativeGap">-</div>
                                <small class="text-muted">ë°±ë¶„ìœ¨ ì°¨ì´</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š ê°­ ìƒíƒœ</h5>
                            </div>
                            <div class="card-body">
                                <div class="status-indicator" id="gapStatus">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WLFI íƒ­ -->
            <div class="tab-pane fade" id="wlfi-content" role="tabpanel">
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š Binance Futures</h5>
                            </div>
                            <div class="card-body">
                                <div class="price-display" id="wlfiBinancePrice">-</div>
                                <div class="text-center">
                                    <a href="https://www.binance.com/en/futures/WLFIUSDT" target="_blank" class="btn btn-outline-light btn-sm">
                                        ê±°ë˜ì†Œ ë°©ë¬¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š Hyperliquid</h5>
                            </div>
                            <div class="card-body">
                                <div class="price-display" id="wlfiHyperliquidPrice">-</div>
                                <div class="text-center">
                                    <a href="https://app.hyperliquid.xyz/trade/WLFI" target="_blank" class="btn btn-outline-light btn-sm">
                                        ê±°ë˜ì†Œ ë°©ë¬¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ’° ì ˆëŒ€ ê°­</h5>
                            </div>
                            <div class="card-body">
                                <div class="gap-display" id="wlfiAbsoluteGap">-</div>
                                <small class="text-muted">USD ì°¨ì´</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“ˆ ìƒëŒ€ ê°­</h5>
                            </div>
                            <div class="card-body">
                                <div class="gap-display" id="wlfiRelativeGap">-</div>
                                <small class="text-muted">ë°±ë¶„ìœ¨ ì°¨ì´</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š ê°­ ìƒíƒœ</h5>
                            </div>
                            <div class="card-body">
                                <div class="status-indicator" id="wlfiGapStatus">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LINEA íƒ­ -->
            <div class="tab-pane fade" id="linea-content" role="tabpanel">
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š Binance Futures</h5>
                            </div>
                            <div class="card-body">
                                <div class="price-display" id="lineaBinancePrice">-</div>
                                <div class="text-center">
                                    <a href="https://www.binance.com/en/futures/LINEAUSDT" target="_blank" class="btn btn-outline-light btn-sm">
                                        ê±°ë˜ì†Œ ë°©ë¬¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š Hyperliquid</h5>
                            </div>
                            <div class="card-body">
                                <div class="price-display" id="lineaHyperliquidPrice">-</div>
                                <div class="text-center">
                                    <a href="https://app.hyperliquid.xyz/trade/LINEA" target="_blank" class="btn btn-outline-light btn-sm">
                                        ê±°ë˜ì†Œ ë°©ë¬¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ’° ì ˆëŒ€ ê°­</h5>
                            </div>
                            <div class="card-body">
                                <div class="gap-display" id="lineaAbsoluteGap">-</div>
                                <small class="text-muted">USD ì°¨ì´</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“ˆ ìƒëŒ€ ê°­</h5>
                            </div>
                            <div class="card-body">
                                <div class="gap-display" id="lineaRelativeGap">-</div>
                                <small class="text-muted">ë°±ë¶„ìœ¨ ì°¨ì´</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">ğŸ“Š ê°­ ìƒíƒœ</h5>
                            </div>
                            <div class="card-body">
                                <div class="status-indicator" id="lineaGapStatus">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê³µí†µ ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">ğŸ® ì»¨íŠ¸ë¡¤ íŒ¨ë„</h5>
                    </div>
                    <div class="card-body text-center">
                        <button class="btn btn-primary btn-lg" onclick="updatePrices()">
                            ğŸ”„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
                        </button>
                        <button class="btn btn-info btn-lg ms-3" onclick="testTelegram()">
                            ğŸ“± í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸
                        </button>
                        <button class="btn btn-secondary btn-lg ms-3" onclick="getBotInfo()">
                            ğŸ¤– ë´‡ ì •ë³´
                        </button>
                        <button class="btn btn-warning btn-lg ms-3" onclick="testNewGroup()">
                            ğŸ†• ë‘ ì±„íŒ… í…ŒìŠ¤íŠ¸
                        </button>
                        <button class="btn btn-success btn-lg ms-3" onclick="testCurrentPrices()">
                            ğŸ§ª í˜„ì¬ ê°€ê²© í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒíƒœ ì •ë³´ -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">ğŸ“Š ìƒíƒœ ì •ë³´</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h6 class="text-info">XPL</h6>
                                <p class="mb-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="xplLastUpdate">-</span></p>
                                <p class="mb-1"><span id="xplSecondsAgo">-</span>ì´ˆ ì „</p>
                            </div>
                            <div class="col-md-4">
                                <h6 class="text-info">WLFI</h6>
                                <p class="mb-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="wlfiLastUpdate">-</span></p>
                                <p class="mb-1"><span id="wlfiSecondsAgo">-</span>ì´ˆ ì „</p>
                            </div>
                            <div class="col-md-4">
                                <h6 class="text-info">LINEA</h6>
                                <p class="mb-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="lineaLastUpdate">-</span></p>
                                <p class="mb-1"><span id="lineaSecondsAgo">-</span>ì´ˆ ì „</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì•Œë¦¼ ì„¤ì • -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card" style="background: #0a0a0a; border-color: #333333;">
                    <div class="card-body">
                        <h6 class="card-title text-warning">ğŸš¨ ê¸´ê¸‰ ì•Œë¦¼ ì„¤ì •</h6>
                        <div class="row text-center">
                            <div class="col-md-2">
                                <small class="text-muted">
                                    XPL Hyperliquid â‰¥ $1.5<br>
                                    <span class="text-info">í…”ë ˆê·¸ë¨ ì•Œë¦¼</span>
                                </small>
                            </div>
                            <div class="col-md-2">
                                <small class="text-muted">
                                    XPL ê°­ â‰¥ 33%<br>
                                    <span class="text-info">í…”ë ˆê·¸ë¨ ì•Œë¦¼</span>
                                </small>
                            </div>
                            <div class="col-md-2">
                                <small class="text-muted">
                                    WLFI Hyperliquid â‰¥ $0.5<br>
                                    <span class="text-info">í…”ë ˆê·¸ë¨ ì•Œë¦¼</span>
                                </small>
                            </div>
                            <div class="col-md-2">
                                <small class="text-muted">
                                    WLFI ê°­ â‰¥ 8%<br>
                                    <span class="text-info">í…”ë ˆê·¸ë¨ ì•Œë¦¼</span>
                                </small>
                            </div>
                            <div class="col-md-2">
                                <small class="text-muted">
                                    LINEA Hyperliquid â‰¥ $0.1<br>
                                    <span class="text-info">í…”ë ˆê·¸ë¨ ì•Œë¦¼</span>
                                </small>
                            </div>
                            <div class="col-md-2">
                                <small class="text-muted">
                                    LINEA ê°­ â‰¥ 15%<br>
                                    <span class="text-info">í…”ë ˆê·¸ë¨ ì•Œë¦¼</span>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // í…”ë ˆê·¸ë¨ ì±„íŒ… IDë“¤
        const CHAT_ID_1 = '1339285013';
        const CHAT_ID_2 = '-4987247224';
        
        // í…”ë ˆê·¸ë¨ ë´‡ ì„¤ì •
        const TELEGRAM_TOKEN = '8468086404:AAFe5viY6CrlqCsOqP6XKjctKxCu6qI3u1E';
        let lastTelegramAlertTime = 0;
        const TELEGRAM_ALERT_COOLDOWN = 300000; // 5ë¶„ ì¿¨ë‹¤ìš´
        
        // íŒì—… ì•Œë¦¼ ê´€ë ¨ ë³€ìˆ˜ë“¤ ì œê±°
        let lastAlertTime = 0;
        const ALERT_COOLDOWN = 300000; // 5ë¶„ ì¿¨ë‹¤ìš´
        
        // í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘ì—)
        async function sendTelegramMessage(message) {
            try {
                // ì²« ë²ˆì§¸ ì±„íŒ…ì— ì „ì†¡
                const url1 = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;
                const response1 = await fetch(url1, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID_1,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                // ë‘ ë²ˆì§¸ ì±„íŒ…ì— ì „ì†¡
                const url2 = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;
                const response2 = await fetch(url2, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID_2,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                const result1 = await response1.json();
                const result2 = await response2.json();
                
                if (result1.ok && result2.ok) {
                    console.log('í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ ì„±ê³µ (ë‘ ì±„íŒ… ëª¨ë‘):', result1, result2);
                } else {
                    console.error('í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨:', result1, result2);
                }
            } catch (error) {
                console.error('í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ ì˜¤ë¥˜:', error);
            }
        }
        
        // XPL ê°€ê²© ê°­ ì•Œë¦¼ ì „ì†¡
        function sendGapAlert(binancePrice, hyperliquidPrice, gapPercentage) {
            const now = Date.now();
            if (now - lastTelegramAlertTime < TELEGRAM_ALERT_COOLDOWN) {
                return; // ì¿¨ë‹¤ìš´ ì¤‘
            }
            
            lastTelegramAlertTime = now;
            
            const message = `âš ï¸ <b>XPL ê°€ê²© ê°­ ì•Œë¦¼</b>\n\nBinance XPL: $${binancePrice.toFixed(6)}\nHyperliquid XPL: $${hyperliquidPrice.toFixed(6)}\nê°­: ${gapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
            
            // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
            sendTelegramMessage(message);
            
            console.log('í…”ë ˆê·¸ë¨ ê°­ ì•Œë¦¼ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘):', gapPercentage.toFixed(2) + '%');
        }
        
        // WLFI ê°€ê²© ê°­ ì•Œë¦¼ ì „ì†¡
        function sendWLFIGapAlert(binancePrice, hyperliquidPrice, gapPercentage) {
            const now = Date.now();
            if (now - lastTelegramAlertTime < TELEGRAM_ALERT_COOLDOWN) {
                return; // ì¿¨ë‹¤ìš´ ì¤‘
            }
            
            lastTelegramAlertTime = now;
            
            const message = `âš ï¸ <b>WLFI ê°€ê²© ê°­ ì•Œë¦¼</b>\n\nBinance WLFI: $${binancePrice.toFixed(6)}\nHyperliquid WLFI: $${hyperliquidPrice.toFixed(6)}\nê°­: ${gapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
            
            // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
            sendTelegramMessage(message);
            
            console.log('í…”ë ˆê·¸ë¨ WLFI ê°­ ì•Œë¦¼ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘):', gapPercentage.toFixed(2) + '%');
        }
        
        // XPL ê¸´ê¸‰ ì•Œë¦¼ ì²´í¬
        function checkEmergencyAlert(binancePrice, hyperliquidPrice, gapPercentage) {
            if (hyperliquidPrice >= 1.5 || gapPercentage >= 33.0) {
                const message = `ğŸš¨ <b>XPL ê¸´ê¸‰ ì•Œë¦¼!</b>\n\nHyperliquid XPL: $${hyperliquidPrice.toFixed(6)}\nBinance XPL: $${binancePrice.toFixed(6)}\nê°­: ${gapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
                
                // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
                sendTelegramMessage(message);
                
                console.log('ê¸´ê¸‰ í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘):', message);
            }
        }
        
        // WLFI ê¸´ê¸‰ ì•Œë¦¼ ì²´í¬
        function checkWLFIEmergencyAlert(binancePrice, hyperliquidPrice, gapPercentage) {
            if (hyperliquidPrice >= 0.5 || gapPercentage >= 8.0) {
                const message = `ğŸš¨ <b>WLFI ê¸´ê¸‰ ì•Œë¦¼!</b>\n\nHyperliquid WLFI: $${hyperliquidPrice.toFixed(6)}\nBinance WLFI: $${binancePrice.toFixed(6)}\nê°­: ${gapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
                
                // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
                sendTelegramMessage(message);
                
                console.log('ê¸´ê¸‰ WLFI í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘):', message);
            }
        }
        
        // LINEA ê°€ê²© ê°­ ì•Œë¦¼ ì „ì†¡
        function sendLINEAGapAlert(binancePrice, hyperliquidPrice, gapPercentage) {
            const now = Date.now();
            if (now - lastTelegramAlertTime < TELEGRAM_ALERT_COOLDOWN) {
                return; // ì¿¨ë‹¤ìš´ ì¤‘
            }
            
            lastTelegramAlertTime = now;
            
            const message = `âš ï¸ <b>LINEA ê°€ê²© ê°­ ì•Œë¦¼</b>\n\nBinance LINEA: $${binancePrice.toFixed(6)}\nHyperliquid LINEA: $${hyperliquidPrice.toFixed(6)}\nê°­: ${gapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
            
            // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
            sendTelegramMessage(message);
            
            console.log('í…”ë ˆê·¸ë¨ LINEA ê°­ ì•Œë¦¼ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘):', gapPercentage.toFixed(2) + '%');
        }
        
        // LINEA ê¸´ê¸‰ ì•Œë¦¼ ì²´í¬
        function checkLINEAEmergencyAlert(binancePrice, hyperliquidPrice, gapPercentage) {
            if (hyperliquidPrice >= 0.1 || gapPercentage >= 15.0) {
                const message = `ğŸš¨ <b>LINEA ê¸´ê¸‰ ì•Œë¦¼!</b>\n\nHyperliquid LINEA: $${hyperliquidPrice.toFixed(6)}\nBinance LINEA: $${binancePrice.toFixed(6)}\nê°­: ${gapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
                
                // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
                sendTelegramMessage(message);
                
                console.log('ê¸´ê¸‰ LINEA í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ (ë‘ ì±„íŒ… ëª¨ë‘):', message);
            }
        }
        
        // íŠ¹ì • ê·¸ë£¹ì— í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ (ì‚¬ìš©í•˜ì§€ ì•ŠìŒ - sendTelegramMessageë¡œ í†µí•©)
        async function sendTelegramMessageToGroup(message, chatId) {
            console.log('sendTelegramMessageToGroup í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. sendTelegramMessageë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.');
        }
        
        // í…”ë ˆê·¸ë¨ ë´‡ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        async function getBotInfo() {
            try {
                const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/getMe`;
                const response = await fetch(url);
                const result = await response.json();
                
                if (result.ok) {
                    console.log('ë´‡ ì •ë³´:', result.result);
                } else {
                    console.error('ë´‡ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', result);
                }
            } catch (error) {
                console.error('ë´‡ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
            }
        }
        
        // ë‘ ì±„íŒ… ëª¨ë‘ì— í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡
        async function testNewGroup() {
            try {
                const message = `ğŸ§ª <b>ë‘ ì±„íŒ… í…ŒìŠ¤íŠ¸</b>\n\nâœ… ë‘ ì±„íŒ… ëª¨ë‘ì— ì•Œë¦¼ì´ ì •ìƒì ìœ¼ë¡œ ì „ì†¡ë©ë‹ˆë‹¤!\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
                
                // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
                sendTelegramMessage(message);
                
                console.log('ë‘ ì±„íŒ… ëª¨ë‘ì— í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ê°€ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (error) {
                console.error('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡ ì˜¤ë¥˜:', error);
            }
        }
        
        // íŒì—… ì•Œë¦¼ ë¹„í™œì„±í™” - í…”ë ˆê·¸ë¨ ì•Œë¦¼ë§Œ ì‚¬ìš©
        function showAlert(message, isUrgent = false) {
            // íŒì—… ì•Œë¦¼ì€ ë¹„í™œì„±í™”í•˜ê³  í…”ë ˆê·¸ë¨ ì•Œë¦¼ë§Œ ì‚¬ìš©
            console.log('íŒì—… ì•Œë¦¼ ë¹„í™œì„±í™”ë¨:', message);
        }
        
        let updateInterval;
        
        // Binance XPL ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        async function getBinanceXPLPrice() {
            try {
                const response = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=XPLUSDT');
                const data = await response.json();
                
                if (data && data.markPrice) {
                    return parseFloat(data.markPrice);
                } else if (data && data.lastPrice) {
                    return parseFloat(data.lastPrice);
                }
                return null;
            } catch (error) {
                console.error('Binance XPL ê°€ê²© ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                return null;
            }
        }
        
        // Binance WLFI ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        async function getBinanceWLFIPrice() {
            try {
                const response = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=WLFIUSDT');
                const data = await response.json();
                
                if (data && data.markPrice) {
                    return parseFloat(data.markPrice);
                } else if (data && data.lastPrice) {
                    return parseFloat(data.lastPrice);
                }
                return null;
            } catch (error) {
                console.error('Binance WLFI ê°€ê²© ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                return null;
            }
        }
        
        // Hyperliquid XPL ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        async function getHyperliquidXPLPrice() {
            try {
                const response = await fetch('https://api.hyperliquid.xyz/info', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        type: 'allMids'
                    })
                });
                
                const data = await response.json();
                
                if (data && data.XPL) {
                    return parseFloat(data.XPL);
                }
                return null;
            } catch (error) {
                console.error('Hyperliquid XPL ê°€ê²© ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                return null;
            }
        }
        
        // Hyperliquid WLFI ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        async function getHyperliquidWLFIPrice() {
            try {
                const response = await fetch('https://api.hyperliquid.xyz/info', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        type: 'allMids'
                    })
                });
                
                const data = await response.json();
                
                if (data && data.WLFI) {
                    return parseFloat(data.WLFI);
                }
                return null;
            } catch (error) {
                console.error('Hyperliquid WLFI ê°€ê²© ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                return null;
            }
        }
        
        // Binance LINEA ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        async function getBinanceLINEAPrice() {
            try {
                const response = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=LINEAUSDT');
                const data = await response.json();
                
                if (data && data.markPrice) {
                    return parseFloat(data.markPrice);
                } else if (data && data.lastPrice) {
                    return parseFloat(data.lastPrice);
                }
                return null;
            } catch (error) {
                console.error('Binance LINEA ê°€ê²© ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                return null;
            }
        }
        
        // Hyperliquid LINEA ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        async function getHyperliquidLINEAPrice() {
            try {
                const response = await fetch('https://api.hyperliquid.xyz/info', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        type: 'allMids'
                    })
                });
                
                const data = await response.json();
                
                if (data && data.LINEA) {
                    return parseFloat(data.LINEA);
                }
                return null;
            } catch (error) {
                console.error('Hyperliquid LINEA ê°€ê²© ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                return null;
            }
        }
        
        // ê°€ê²© ê°­ ê³„ì‚°
        function calculateGap(price1, price2) {
            if (!price1 || !price2) return { absolute: 0, percentage: 0 };
            
            const absolute = Math.abs(price1 - price2);
            const percentage = (absolute / Math.min(price1, price2)) * 100;
            
            return { absolute, percentage };
        }
        
        // ê°­ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateGapStatus(gapPercentage, statusElementId) {
            const statusElement = document.getElementById(statusElementId);
            
            if (gapPercentage >= 50) {
                statusElement.className = 'status-indicator status-danger';
                statusElement.textContent = 'ğŸš¨ ìœ„í—˜';
            } else if (gapPercentage >= 25) {
                statusElement.className = 'status-indicator status-warning';
                statusElement.textContent = 'âš ï¸ ì£¼ì˜';
            } else {
                statusElement.className = 'status-indicator status-normal';
                statusElement.textContent = 'âœ… ì •ìƒ';
            }
        }
        
        // ê°€ê²© ì—…ë°ì´íŠ¸
        async function updatePrices() {
            const timestamp = Date.now();
            
            // XPL ê°€ê²© ì—…ë°ì´íŠ¸
            const binanceXPLPrice = await getBinanceXPLPrice();
            const hyperliquidXPLPrice = await getHyperliquidXPLPrice();
            
            if (binanceXPLPrice !== null) {
                document.getElementById('binancePrice').textContent = '$' + binanceXPLPrice.toFixed(6);
            } else {
                document.getElementById('binancePrice').textContent = 'ì˜¤ë¥˜';
            }
            
            if (hyperliquidXPLPrice !== null) {
                document.getElementById('hyperliquidPrice').textContent = '$' + hyperliquidXPLPrice.toFixed(6);
            } else {
                document.getElementById('hyperliquidPrice').textContent = 'ì˜¤ë¥˜';
            }
            
            if (binanceXPLPrice && hyperliquidXPLPrice) {
                const gap = calculateGap(binanceXPLPrice, hyperliquidXPLPrice);
                
                document.getElementById('absoluteGap').textContent = '$' + gap.absolute.toFixed(6);
                document.getElementById('relativeGap').textContent = gap.percentage.toFixed(2) + '%';
                
                // ê¸´ê¸‰ ì•Œë¦¼ ì²´í¬ (í…”ë ˆê·¸ë¨ë§Œ)
                checkEmergencyAlert(binanceXPLPrice, hyperliquidXPLPrice, gap.percentage);
                
                const statusElement = document.getElementById('gapStatus');
                updateGapStatus(gap.percentage, 'gapStatus');
                
                // XPL ì—…ë°ì´íŠ¸ ì‹œê°„ ê¸°ë¡
                document.getElementById('xplLastUpdate').textContent = new Date(timestamp).toLocaleString('ko-KR');
                document.getElementById('xplSecondsAgo').textContent = '0';
                
                // ê°­ ì•Œë¦¼ (40% ì´ìƒ)
                if (gap.percentage >= 40.0) {
                    sendGapAlert(binanceXPLPrice, hyperliquidXPLPrice, gap.percentage);
                }
            }
            
            // WLFI ê°€ê²© ì—…ë°ì´íŠ¸
            const binanceWLFIPrice = await getBinanceWLFIPrice();
            const hyperliquidWLFIPrice = await getHyperliquidWLFIPrice();
            
            if (binanceWLFIPrice !== null) {
                document.getElementById('wlfiBinancePrice').textContent = '$' + binanceWLFIPrice.toFixed(6);
            } else {
                document.getElementById('wlfiBinancePrice').textContent = 'ì˜¤ë¥˜';
            }
            
            if (hyperliquidWLFIPrice !== null) {
                document.getElementById('wlfiHyperliquidPrice').textContent = '$' + hyperliquidWLFIPrice.toFixed(6);
            } else {
                document.getElementById('wlfiHyperliquidPrice').textContent = 'ì˜¤ë¥˜';
            }
            
            if (binanceWLFIPrice && hyperliquidWLFIPrice) {
                const wlfiGap = calculateGap(binanceWLFIPrice, hyperliquidWLFIPrice);
                
                document.getElementById('wlfiAbsoluteGap').textContent = '$' + wlfiGap.absolute.toFixed(6);
                document.getElementById('wlfiRelativeGap').textContent = wlfiGap.percentage.toFixed(2) + '%';
                
                // WLFI ê¸´ê¸‰ ì•Œë¦¼ ì²´í¬ (í…”ë ˆê·¸ë¨ë§Œ)
                checkWLFIEmergencyAlert(binanceWLFIPrice, hyperliquidWLFIPrice, wlfiGap.percentage);
                
                updateGapStatus(wlfiGap.percentage, 'wlfiGapStatus');
                
                // WLFI ì—…ë°ì´íŠ¸ ì‹œê°„ ê¸°ë¡
                document.getElementById('wlfiLastUpdate').textContent = new Date(timestamp).toLocaleString('ko-KR');
                document.getElementById('wlfiSecondsAgo').textContent = '0';
                
                // WLFI ê°­ ì•Œë¦¼ (40% ì´ìƒ)
                if (wlfiGap.percentage >= 40.0) {
                    sendWLFIGapAlert(binanceWLFIPrice, hyperliquidWLFIPrice, wlfiGap.percentage);
                }
            }
            
            // LINEA ê°€ê²© ì—…ë°ì´íŠ¸
            const binanceLINEAPrice = await getBinanceLINEAPrice();
            const hyperliquidLINEAPrice = await getHyperliquidLINEAPrice();
            
            if (binanceLINEAPrice !== null) {
                document.getElementById('lineaBinancePrice').textContent = '$' + binanceLINEAPrice.toFixed(6);
            } else {
                document.getElementById('lineaBinancePrice').textContent = 'ì˜¤ë¥˜';
            }
            
            if (hyperliquidLINEAPrice !== null) {
                document.getElementById('lineaHyperliquidPrice').textContent = '$' + hyperliquidLINEAPrice.toFixed(6);
            } else {
                document.getElementById('lineaHyperliquidPrice').textContent = 'ì˜¤ë¥˜';
            }
            
            if (binanceLINEAPrice && hyperliquidLINEAPrice) {
                const lineaGap = calculateGap(binanceLINEAPrice, hyperliquidLINEAPrice);
                
                document.getElementById('lineaAbsoluteGap').textContent = '$' + lineaGap.absolute.toFixed(6);
                document.getElementById('lineaRelativeGap').textContent = lineaGap.percentage.toFixed(2) + '%';
                
                // LINEA ê¸´ê¸‰ ì•Œë¦¼ ì²´í¬ (í…”ë ˆê·¸ë¨ë§Œ)
                checkLINEAEmergencyAlert(binanceLINEAPrice, hyperliquidLINEAPrice, lineaGap.percentage);
                
                updateGapStatus(lineaGap.percentage, 'lineaGapStatus');
                
                // LINEA ì—…ë°ì´íŠ¸ ì‹œê°„ ê¸°ë¡
                document.getElementById('lineaLastUpdate').textContent = new Date(timestamp).toLocaleString('ko-KR');
                document.getElementById('lineaSecondsAgo').textContent = '0';
                
                // LINEA ê°­ ì•Œë¦¼ (40% ì´ìƒ)
                if (lineaGap.percentage >= 40.0) {
                    sendLINEAGapAlert(binanceLINEAPrice, hyperliquidLINEAPrice, lineaGap.percentage);
                }
            }
            
            // ì´ˆ ë‹¨ìœ„ ì—…ë°ì´íŠ¸ ì‹œì‘
            startSecondsUpdate();
        }
        
        // ì´ˆ ë‹¨ìœ„ ì—…ë°ì´íŠ¸
        function startSecondsUpdate() {
            if (updateInterval) {
                clearInterval(updateInterval);
            }
            
            updateInterval = setInterval(() => {
                const now = Date.now();
                
                // XPL ì´ˆ ì—…ë°ì´íŠ¸
                const xplLastUpdate = document.getElementById('xplLastUpdate').textContent;
                if (xplLastUpdate !== '-') {
                    const xplTime = new Date(xplLastUpdate).getTime();
                    const xplSeconds = Math.floor((now - xplTime) / 1000);
                    document.getElementById('xplSecondsAgo').textContent = xplSeconds;
                }
                
                // WLFI ì´ˆ ì—…ë°ì´íŠ¸
                const wlfiLastUpdate = document.getElementById('wlfiLastUpdate').textContent;
                if (wlfiLastUpdate !== '-') {
                    const wlfiTime = new Date(wlfiLastUpdate).getTime();
                    const wlfiSeconds = Math.floor((now - wlfiTime) / 1000);
                    document.getElementById('wlfiSecondsAgo').textContent = wlfiSeconds;
                }
                
                // LINEA ì´ˆ ì—…ë°ì´íŠ¸
                const lineaLastUpdate = document.getElementById('lineaLastUpdate').textContent;
                if (lineaLastUpdate !== '-') {
                    const lineaTime = new Date(lineaLastUpdate).getTime();
                    const lineaSeconds = Math.floor((now - lineaTime) / 1000);
                    document.getElementById('lineaSecondsAgo').textContent = lineaSeconds;
                }
            }, 1000);
        }
        
        // í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸
        async function testTelegram() {
            try {
                const message = `ğŸ§ª <b>í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸</b>\n\nâœ… ë´‡ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
                
                await sendTelegramMessage(message);
                console.log('í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡ ì™„ë£Œ!');
            } catch (error) {
                console.error('í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
            }
        }
        
        // í˜„ì¬ ê°€ê²© í…ŒìŠ¤íŠ¸
        async function testCurrentPrices() {
            try {
                // XPL ê°€ê²© ê°€ì ¸ì˜¤ê¸°
                const binanceXPLPrice = await getBinanceXPLPrice();
                const hyperliquidXPLPrice = await getHyperliquidXPLPrice();
                
                if (!binanceXPLPrice || !hyperliquidXPLPrice) {
                    console.log('XPL ê°€ê²©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                const xplGap = calculateGap(binanceXPLPrice, hyperliquidXPLPrice);
                const xplGapPercentage = xplGap.percentage;
                
                // WLFI ê°€ê²© ê°€ì ¸ì˜¤ê¸°
                const binanceWLFIPrice = await getBinanceWLFIPrice();
                const hyperliquidWLFIPrice = await getHyperliquidWLFIPrice();
                
                if (!binanceWLFIPrice || !hyperliquidWLFIPrice) {
                    console.log('WLFI ê°€ê²©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                const wlfiGap = calculateGap(binanceWLFIPrice, hyperliquidWLFIPrice);
                const wlfiGapPercentage = wlfiGap.percentage;
                
                // LINEA ê°€ê²© ê°€ì ¸ì˜¤ê¸°
                const binanceLINEAPrice = await getBinanceLINEAPrice();
                const hyperliquidLINEAPrice = await getHyperliquidLINEAPrice();
                
                if (!binanceLINEAPrice || !hyperliquidLINEAPrice) {
                    console.log('LINEA ê°€ê²©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                const lineaGap = calculateGap(binanceLINEAPrice, hyperliquidLINEAPrice);
                const lineaGapPercentage = lineaGap.percentage;
                
                const testMessage = `ğŸ§ª <b>í˜„ì¬ ê°€ê²© í…ŒìŠ¤íŠ¸</b>\n\nXPL:\nBinance: $${binanceXPLPrice.toFixed(6)}\nHyperliquid: $${hyperliquidXPLPrice.toFixed(6)}\nê°­: ${xplGapPercentage.toFixed(2)}%\n\nWLFI:\nBinance: $${binanceWLFIPrice.toFixed(6)}\nHyperliquid: $${hyperliquidWLFIPrice.toFixed(6)}\nê°­: ${wlfiGapPercentage.toFixed(2)}%\n\nLINEA:\nBinance: $${binanceLINEAPrice.toFixed(6)}\nHyperliquid: $${hyperliquidLINEAPrice.toFixed(6)}\nê°­: ${lineaGapPercentage.toFixed(2)}%\n\nâ° ${new Date().toLocaleString('ko-KR')}`;
                
                // ë‘ ì±„íŒ… ëª¨ë‘ì— ì „ì†¡
                sendTelegramMessage(testMessage);
                
                console.log(`í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡ ì™„ë£Œ!\n\nXPL:\nBinance: $${binanceXPLPrice.toFixed(6)}\nHyperliquid: $${hyperliquidXPLPrice.toFixed(6)}\nê°­: ${xplGapPercentage.toFixed(2)}%\n\nWLFI:\nBinance: $${binanceWLFIPrice.toFixed(6)}\nHyperliquid: $${hyperliquidWLFIPrice.toFixed(6)}\nê°­: ${wlfiGapPercentage.toFixed(2)}%\n\nLINEA:\nBinance: $${binanceLINEAPrice.toFixed(6)}\nHyperliquid: $${hyperliquidLINEAPrice.toFixed(6)}\nê°­: ${lineaGapPercentage.toFixed(2)}%`);
            } catch (error) {
                console.error('í˜„ì¬ ê°€ê²© í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì—…ë°ì´íŠ¸ ì‹œì‘
        document.addEventListener('DOMContentLoaded', function() {
            updatePrices();
            
            // 30ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
            setInterval(updatePrices, 30000);
        });
    </script>
</body>
</html>
